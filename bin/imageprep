#!/usr/bin/env ruby

#
#                     _                     ______ _      _    
#     /\             | |                   |  ____(_)    | |   
#    /  \   _ __   __| |_ __ _____      __ | |__   _  ___| | __
#   / /\ \ | '_ \ / _` | '__/ _ \ \ /\ / / |  __| | |/ __| |/ /
#  / ____ \| | | | (_| | | |  __/\ V  V /  | |____| | (__|   < 
# /_/    \_\_| |_|\__,_|_|  \___| \_/\_/   |______|_|\___|_|\_\
#

require 'rubygems'
require 'bundler/setup'

require_relative '../lib/imageprep/resize'
require_relative '../lib/imageprep/options'

opts = ImagePrep::Options.new(ARGV)

opts.images_to_load.each { |image_file_name|
	puts "Processing #{image_file_name}"
	
	# create the images in the correct directory
	rz = ImagePrep::Resize.new(image_file_name, opts.out_dir_images)

	# Write out YAML file describing the metadata of each imageimage
	md = ImagePrep::MetaData.new(image_file_name)
	md.write_yaml(rz.path_original_dir)
}
